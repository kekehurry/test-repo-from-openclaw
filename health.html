<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>health 命令 - OpenClaw 文档</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>OpenClaw 文档</h1>
            </div>
            <nav>
                <div class="nav-section">
                    <h2>入门指南</h2>
                    <ul class="nav-links">
                        <li><a href="index.html">什么是 OpenClaw</a></li>
                        <li><a href="getting-started.html">快速开始</a></li>
                        <li><a href="installation.html">安装指南</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>核心命令</h2>
                    <ul class="nav-links">
                        <li><a href="gateway.html">gateway</a></li>
                        <li><a href="config.html">config</a></li>
                        <li><a href="setup.html">setup</a></li>
                        <li><a href="message.html">message</a></li>
                        <li><a href="channels.html">channels</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>高级功能</h2>
                    <ul class="nav-links">
                        <li><a href="agents.html">agents</a></li>
                        <li><a href="cron.html">cron</a></li>
                        <li><a href="browser.html">browser</a></li>
                        <li><a href="skills.html">skills</a></li>
                        <li><a href="models.html">models</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>系统管理</h2>
                    <ul class="nav-links">
                        <li><a href="status.html">status</a></li>
                        <li><a href="health.html" class="active">health</a></li>
                        <li><a href="logs.html">logs</a></li>
                        <li><a href="security.html">security</a></li>
                        <li><a href="update.html">update</a></li>
                    </ul>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1>health 命令</h1>
                <p>获取运行中 Gateway 的健康状态信息</p>
            </div>

            <div class="content-section">
                <h2>命令概述</h2>
                <p><code>health</code> 命令用于获取 OpenClaw Gateway 服务的实时健康状态。它提供详细的系统信息、资源使用情况、连接状态和性能指标，帮助你监控和诊断 OpenClaw 的运行状况。</p>
                
                <div class="examples">
                    <h3>主要功能</h3>
                    <ul>
                        <li><strong>系统健康检查</strong>: CPU、内存、磁盘使用情况</li>
                        <li><strong>连接状态</strong>: 消息渠道连接状态和活跃会话数</li>
                        <li><strong>性能指标</strong>: 响应时间、吞吐量、错误率</li>
                        <li><strong>资源监控</strong>: 实时监控系统资源使用</li>
                        <li><strong>诊断信息</strong>: 详细的错误日志和警告信息</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2>基本用法</h2>
                
                <h3>查看基本健康状态</h3>
                <pre><code># 获取基本健康信息
openclaw health

# 获取详细健康信息
openclaw health --verbose

# 以 JSON 格式输出
openclaw health --json</code></pre>

                <h3>持续监控</h3>
                <pre><code># 持续监控健康状态（每5秒刷新）
openclaw health --watch

# 自定义刷新间隔
openclaw health --watch --interval 10</code></pre>
            </div>

            <div class="content-section">
                <h2>输出字段说明</h2>
                
                <table style="width: 10; border-collapse: collapse; margin: 16px 0;">
                    <thead>
                        <tr style="background-color: var(--code-bg);">
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border-color);">字段</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border-color);">说明</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid var(--border-color);">示例值</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>status</code></td>
                            <td style="padding: 12px;">整体健康状态</td>
                            <td style="padding: 12px;"><code>healthy</code>, <code>warning</code>, <code>critical</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>uptime</code></td>
                            <td style="padding: 12px;">Gateway 运行时间</td>
                            <td style="padding: 12px;"><code>2d 14h 32m</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>cpu_usage</code></td>
                            <td style="padding: 12px;">CPU 使用率</td>
                            <td style="padding: 12px;"><code>23.5%</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>memory_usage</code></td>
                            <td style="padding: 12px;">内存使用量</td>
                            <td style="padding: 12px;"><code>1.2GB / 8GB</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>active_sessions</code></td>
                            <td style="padding: 12px;">活跃会话数量</td>
                            <td style="padding: 12px;"><code>42</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>channels</code></td>
                            <td style="padding: 12px;">消息渠道状态</td>
                            <td style="padding: 12px;"><code>telegram: connected, whatsapp: disconnected</code></td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 12px;"><code>response_time</code></td>
                            <td style="padding: 12px;">平均响应时间</td>
                            <td style="padding: 12px;"><code>245ms</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="content-section">
                <h2>高级选项</h2>
                
                <h3>特定组件健康检查</h3>
                <pre><code># 检查 Gateway 健康
openclaw health --component gateway

# 检查模型提供者健康
openclaw health --component models

# 检查消息渠道健康
openclaw health --component channels

# 检查所有组件
openclaw health --component all</code></pre>

                <h3>阈值和警报</h3>
                <pre><code># 设置 CPU 警报阈值
openclaw health --cpu-threshold 80

# 设置内存警报阈值
openclaw health --memory-threshold 90

# 设置响应时间警报阈值
openclaw health --response-time-threshold 1000</code></pre>
            </div>

            <div class="content-section">
                <h2>集成和自动化</h2>
                
                <h3>与监控系统集成</h3>
                <pre><code># 输出 Prometheus 格式指标
openclaw health --format prometheus

# 输出 InfluxDB 行协议
openclaw health --format influxdb

# 输出 Graphite 格式
openclaw health --format graphite</code></pre>

                <h3>健康检查脚本</h3>
                <pre><code>#!/bin/bash
# 健康检查脚本
HEALTH_STATUS=$(openclaw health --json | jq -r '.status')

if [ "$HEALTH_STATUS" != "healthy" ]; then
    echo "⚠️ OpenClaw 健康状态异常: $HEALTH_STATUS"
    openclaw message send --target @admin --message "OpenClaw 健康状态: $HEALTH_STATUS"
    exit 1
else
    echo "✅ OpenClaw 运行正常"
    exit 0
fi</code></pre>
            </div>

            <div class="content-section">
                <h2>故障排除</h2>
                
                <div class="warning">
                    <h3>常见健康问题</h3>
                    <ul>
                        <li><strong>CPU 使用率过高</strong>: 检查是否有大量并发请求或复杂的 AI 任务</li>
                        <li><strong>内存泄漏</strong>: 监控内存使用趋势，考虑重启 Gateway</li>
                        <li><strong>渠道连接失败</strong>: 检查网络连接和 API 凭证</li>
                        <li><strong>响应时间过长</strong>: 检查模型提供者状态和网络延迟</li>
                    </ul>
                </div>

                <h3>诊断命令</h3>
                <pre><code># 查看详细日志
openclaw logs --tail 100

# 检查特定组件
openclaw health --component gateway --verbose

# 执行完整诊断
openclaw doctor</code></pre>
            </div>

            <div class="footer">
                <p>© 2026 OpenClaw 文档 | <a href="https://docs.openclaw.ai" target="_blank">官方文档</a></p>
            </div>
        </main>
    </div>
</body>
</html>