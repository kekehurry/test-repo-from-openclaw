<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>security 命令 - OpenClaw 文档</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>OpenClaw 文档</h1>
            </div>
            <nav>
                <div class="nav-section">
                    <h2>入门指南</h2>
                    <ul class="nav-links">
                        <li><a href="index.html">什么是 OpenClaw</a></li>
                        <li><a href="getting-started.html">快速开始</a></li>
                        <li><a href="installation.html">安装指南</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>核心命令</h2>
                    <ul class="nav-links">
                        <li><a href="gateway.html">gateway</a></li>
                        <li><a href="config.html">config</a></li>
                        <li><a href="setup.html">setup</a></li>
                        <li><a href="message.html">message</a></li>
                        <li><a href="channels.html">channels</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>高级功能</h2>
                    <ul class="nav-links">
                        <li><a href="agents.html">agents</a></li>
                        <li><a href="cron.html">cron</a></li>
                        <li><a href="browser.html">browser</a></li>
                        <li><a href="skills.html">skills</a></li>
                        <li><a href="models.html">models</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>系统管理</h2>
                    <ul class="nav-links">
                        <li><a href="status.html">status</a></li>
                        <li><a href="health.html">health</a></li>
                        <li><a href="logs.html">logs</a></li>
                        <li><a href="security.html" class="active">security</a></li>
                        <li><a href="update.html">update</a></li>
                    </ul>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1>security 命令</h1>
                <p>安全工具和本地配置审计，确保 OpenClaw 安全运行</p>
            </div>

            <div class="content-section">
                <h2>命令概述</h2>
                <p><code>security</code> 命令提供了一套完整的安全工具集，用于审计本地配置、检测潜在安全风险、管理敏感信息，并确保 OpenClaw 系统的安全性。它帮助用户识别和修复安全漏洞，保护 API 密钥和敏感数据。</p>
                
                <div class="examples">
                    <h3>核心功能</h3>
                    <ul>
                        <li><strong>配置审计</strong>: 扫描配置文件中的安全问题</li>
                        <li><strong>权限检查</strong>: 验证文件和目录的权限设置</li>
                        <li><strong>敏感信息检测</strong>: 识别配置中的硬编码密钥或密码</li>
                        <li><strong>网络安全性</strong>: 检查网络配置和防火墙设置</li>
                        <li><strong>依赖安全</strong>: 扫描依赖包中的已知漏洞</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2>子命令列表</h2>
                
                <ul class="command-list">
                    <li><code>security audit</code> - 执行全面的安全审计</li>
                    <li><code>security config</code> - 检查配置文件安全性</li>
                    <li><code>security permissions</code> - 验证文件权限</li>
                    <li><code>security secrets</code> - 扫描敏感信息泄露</li>
                    <li><code>security network</code> - 检查网络安全性</li>
                    <li><code>security dependencies</code> - 扫描依赖漏洞</li>
                    <li><code>security harden</code> - 自动应用安全加固</li>
                    <li><code>security report</code> - 生成安全报告</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>安全审计</h2>
                
                <h3>全面审计</h3>
                <pre><code># 执行完整安全审计
openclaw security audit

# 执行快速审计（只检查关键项目）
openclaw security audit --quick

# 详细审计（包含所有检查项）
openclaw security audit --verbose</code></pre>

                <h3>配置审计</h3>
                <pre><code># 检查配置文件安全性
openclaw security config

# 检查特定配置项
openclaw security config --check api_keys

# 修复发现的问题
openclaw security config --fix</code></pre>
            </div>

            <div class="content-section">
                <h2>权限和文件安全</h2>
                
                <h3>文件权限检查</h3>
                <pre><code># 检查工作区权限
openclaw security permissions

# 检查特定目录
openclaw security permissions --path ~/.openclaw

# 自动修复权限问题
openclaw security permissions --fix</code></pre>

                <h3>敏感信息扫描</h3>
                <pre><code># 扫描整个工作区的敏感信息
openclaw security secrets

# 扫描特定文件类型
openclaw security secrets --types json,yaml,env

# 排除特定目录
openclaw security secrets --exclude node_modules,.git</code></pre>
            </div>

            <div class="content-section">
                <h2>网络安全</h2>
                
                <h3>端口和防火墙检查</h3>
                <pre><code># 检查开放端口
openclaw security network --ports

# 检查防火墙规则
openclaw security network --firewall

# 检查 TLS/SSL 配置
openclaw security network --tls</code></pre>

                <h3>API 安全</h3>
                <pre><code># 检查 API 密钥安全性
openclaw security network --api-keys

# 验证 HTTPS 连接
openclaw security network --https

# 检查 CORS 配置
openclaw security network --cors</code></pre>
            </div>

            <div class="content-section">
                <h2>依赖安全</h2>
                
                <h3>漏洞扫描</h3>
                <pre><code># 扫描 npm 依赖漏洞
openclaw security dependencies --npm

# 扫描所有依赖
openclaw security dependencies --all

# 生成漏洞报告
openclaw security dependencies --report vulnerabilities.json</code></pre>

                <h3>依赖更新</h3>
                <pre><code># 检查可更新的依赖
openclaw security dependencies --updates

# 自动更新有安全补丁的依赖
openclaw security dependencies --patch</code></pre>
            </div>

            <div class="content-section">
                <h2>安全加固</h2>
                
                <h3>自动加固</h3>
                <pre><code># 应用推荐的安全设置
openclaw security harden

# 仅预览将要应用的更改
openclaw security harden --dry-run

# 应用特定的安全策略
openclaw security harden --policy production</code></pre>

                <h3>安全策略</h3>
                <pre><code># 开发环境策略
openclaw security harden --policy development

# 生产环境策略（最严格）
openclaw security harden --policy production

# 自定义策略
openclaw security harden --policy /path/to/custom-policy.json</code></pre>
            </div>

            <div class="content-section">
                <h2>安全报告</h2>
                
                <h3>生成报告</h3>
                <pre><code># 生成 HTML 报告
openclaw security report --format html --output security-report.html

# 生成 JSON 报告
openclaw security report --format json --output security-report.json

# 生成简洁文本报告
openclaw security report --format text --output security-report.txt</code></pre>

                <h3>报告内容</h3>
                <p>安全报告通常包含以下信息：</p>
                <ul>
                    <li><strong>风险等级</strong>: 高、中、低风险问题的数量</li>
                    <li><strong>详细问题列表</strong>: 每个问题的描述、位置和修复建议</li>
                    <li><strong>合规性状态</strong>: 是否符合安全最佳实践</li>
                    <li><strong>历史趋势</strong>: 与之前扫描的比较</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>最佳实践</h2>
                
                <ul>
                    <li><strong>定期审计</strong>: 每周或每次重大配置更改后运行安全审计</li>
                    <li><strong>最小权限原则</strong>: 只授予必要的文件和网络权限</li>
                    <li><strong>敏感信息管理</strong>: 使用环境变量或密钥管理服务，避免硬编码</li>
                    <li><strong>及时更新</strong>: 定期更新依赖包以修复已知漏洞</li>
                    <li><strong>网络隔离</strong>: 在生产环境中使用防火墙限制访问</li>
                </ul>

                <div class="examples">
                    <h3>自动化安全检查脚本</h3>
                    <pre><code>#!/bin/bash
# CI/CD 中的安全检查
openclaw security audit --quick
if [ $? -ne 0 ]; then
    echo "安全审计失败，阻止部署"
    exit 1
fi

# 生成安全报告
openclaw security report --format json --output security-report.json</code></pre>
                </div>
            </div>

            <div class="content-section">
                <h2>故障排除</h2>
                
                <div class="warning">
                    <h3>常见问题</h3>
                    <ul>
                        <li><strong>权限不足</strong>: 某些安全检查需要管理员权限</li>
                        <li><strong>误报</strong>: 某些检查可能产生误报，需要人工验证</li>
                        <li><strong>性能影响</strong>: 完整审计可能需要较长时间</li>
                        <li><strong>网络限制</strong>: 某些网络检查可能被防火墙阻止</li>
                    </ul>
                </div>

                <h3>调试技巧</h3>
                <pre><code># 启用详细日志
openclaw security audit --verbose --debug

# 跳过特定检查
openclaw security audit --skip network,dependencies

# 设置超时时间
openclaw security audit --timeout 300</code></pre>
            </div>

            <div class="footer">
                <p>© 2026 OpenClaw 文档 | <a href="https://docs.openclaw.ai" target="_blank">官方文档</a></p>
            </div>
        </main>
    </div>
</body>
</html>