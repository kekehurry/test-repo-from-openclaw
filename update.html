<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update 命令 - OpenClaw 文档</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>OpenClaw 文档</h1>
            </div>
            <nav>
                <div class="nav-section">
                    <h2>入门指南</h2>
                    <ul class="nav-links">
                        <li><a href="index.html">什么是 OpenClaw</a></li>
                        <li><a href="getting-started.html">快速开始</a></li>
                        <li><a href="installation.html">安装指南</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>核心命令</h2>
                    <ul class="nav-links">
                        <li><a href="gateway.html">gateway</a></li>
                        <li><a href="config.html">config</a></li>
                        <li><a href="setup.html">setup</a></li>
                        <li><a href="message.html">message</a></li>
                        <li><a href="channels.html">channels</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>高级功能</h2>
                    <ul class="nav-links">
                        <li><a href="agents.html">agents</a></li>
                        <li><a href="cron.html">cron</a></li>
                        <li><a href="browser.html">browser</a></li>
                        <li><a href="skills.html">skills</a></li>
                        <li><a href="models.html">models</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>系统管理</h2>
                    <ul class="nav-links">
                        <li><a href="status.html">status</a></li>
                        <li><a href="health.html">health</a></li>
                        <li><a href="logs.html">logs</a></li>
                        <li><a href="security.html">security</a></li>
                        <li><a href="update.html" class="active">update</a></li>
                    </ul>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1>update 命令</h1>
                <p>更新 OpenClaw 并检查更新渠道状态</p>
            </div>

            <div class="content-section">
                <h2>命令概述</h2>
                <p><code>update</code> 命令用于管理和执行 OpenClaw 的更新操作。它支持多种更新渠道（stable、beta、canary），可以检查可用更新、执行更新、回滚到之前的版本，以及管理更新配置。</p>
                
                <div class="examples">
                    <h3>核心功能</h3>
                    <ul>
                        <li><strong>自动更新</strong>: 一键更新到最新版本</li>
                        <li><strong>多渠道支持</strong>: stable、beta、canary 更新渠道</li>
                        <li><strong>版本回滚</strong>: 安全地回滚到之前的版本</li>
                        <li><strong>更新预览</strong>: 查看即将安装的更新内容</li>
                        <li><strong>离线更新</strong>: 支持离线环境下的手动更新</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2>子命令列表</h2>
                
                <ul class="command-list">
                    <li><code>update check</code> - 检查是否有可用更新</li>
                    <li><code>update run</code> - 执行更新到最新版本</li>
                    <li><code>update channel &lt;name&gt;</code> - 切换更新渠道</li>
                    <li><code>update rollback</code> - 回滚到上一个版本</li>
                    <li><code>update status</code> - 查看当前更新状态</li>
                    <li><code>update list</code> - 列出所有可用版本</li>
                    <li><code>update install &lt;version&gt;</code> - 安装特定版本</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>更新渠道</h2>
                
                <h3>Stable 渠道（默认）</h3>
                <p>稳定版本，经过充分测试，适合生产环境使用。</p>
                <pre><code># 切换到 stable 渠道
openclaw update channel stable

# 检查 stable 渠道的更新
openclaw update check --channel stable</code></pre>

                <h3>Beta 渠道</h3>
                <p>预发布版本，包含新功能但可能有轻微问题，适合测试环境。</p>
                <pre><code># 切换到 beta 渠道
openclaw update channel beta

# 安装最新的 beta 版本
openclaw update run --channel beta</code></pre>

                <h3>Canary 渠道</h3>
                <p>每日构建版本，包含最新功能但稳定性未知，仅适合开发和测试。</p>
                <pre><code># 切换到 canary 渠道
openclaw update channel canary

# 注意：canary 版本可能不稳定
openclaw update run --channel canary</code></pre>
            </div>

            <div class="content-section">
                <h2>常用更新操作</h2>
                
                <h3>检查更新</h3>
                <pre><code># 检查是否有可用更新
openclaw update check

# 显示详细更新信息
openclaw update check --verbose

# 检查特定渠道的更新
openclaw update check --channel beta</code></pre>

                <h3>执行更新</h3>
                <pre><code># 更新到最新稳定版本
openclaw update run

# 更新并显示详细日志
openclaw update run --verbose

# 强制更新（跳过确认）
openclaw update run --force

# 更新到特定版本
openclaw update install 2026.2.17</code></pre>

                <h3>版本回滚</h3>
                <pre><code># 回滚到上一个版本
openclaw update rollback

# 囗滚并保留当前配置
openclaw update rollback --keep-config

# 查看可回滚的版本
openclaw update list --rollback</code></pre>
            </div>

            <div class="content-section">
                <h2>自动化更新</h2>
                
                <h3>配置自动更新</h3>
                <pre><code># 启用自动更新
openclaw config set update.auto true

# 设置自动更新渠道
openclaw config set update.channel stable

# 设置自动更新时间（每天凌晨2点）
openclaw cron add \
    --name "auto-update" \
    --schedule "0 2 * * *" \
    --command "openclaw update run --quiet"</code></pre>

                <h3>更新通知</h3>
                <pre><code># 配置更新完成通知
openclaw config set update.notify true
openclaw config set update.notify.target "@admin"

# 自定义更新通知消息
openclaw config set update.notify.message "OpenClaw 已更新到 {{version}}"</code></pre>
            </div>

            <div class="content-section">
                <h2>离线更新</h2>
                
                <h3>下载更新包</h3>
                <pre><code># 下载最新版本的 tarball
wget https://github.com/openclaw/openclaw/releases/latest/download/openclaw-linux-x64.tar.gz

# 验证下载文件
sha256sum openclaw-linux-x64.tar.gz</code></pre>

                <h3>手动安装</h3>
                <pre><code># 停止当前服务
openclaw gateway stop

# 备份当前安装
cp -r /usr/local/bin/openclaw /usr/local/bin/openclaw.backup

# 解压并安装新版本
tar -xzf openclaw-linux-x64.tar.gz -C /usr/local/bin/

# 启动新版本
openclaw gateway start

# 验证安装
openclaw --version</code></pre>
            </div>

            <div class="content-section">
                <h2>故障排除</h2>
                
                <div class="warning">
                    <h3>常见问题</h3>
                    <ul>
                        <li><strong>更新失败</strong>: 检查网络连接和权限，确保有足够的磁盘空间</li>
                        <li><strong>版本冲突</strong>: 如果遇到依赖冲突，尝试清理 npm 缓存或使用 --force 选项</li>
                        <li><strong>回滚失败</strong>: 确保备份目录存在，手动恢复备份文件</li>
                        <li><strong>渠道切换问题</strong>: 某些渠道可能需要重新配置，检查兼容性</li>
                    </ul>
                </div>

                <h3>调试命令</h3>
                <pre><code># 查看详细的更新日志
openclaw update run --debug

# 检查当前安装状态
openclaw update status

# 验证安装完整性
openclaw update verify</code></pre>
            </div>

            <div class="footer">
                <p>© 2026 OpenClaw 文档 | <a href="https://docs.openclaw.ai" target="_blank">官方文档</a></p>
            </div>
        </main>
    </div>
</body>
</html>