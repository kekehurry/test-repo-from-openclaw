<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>status 命令 - OpenClaw 文档</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>OpenClaw 文档</h1>
            </div>
            <nav>
                <div class="nav-section">
                    <h2>入门指南</h2>
                    <ul class="nav-links">
                        <li><a href="index.html">什么是 OpenClaw</a></li>
                        <li><a href="getting-started.html">快速开始</a></li>
                        <li><a href="installation.html">安装指南</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>核心命令</h2>
                    <ul class="nav-links">
                        <li><a href="gateway.html">gateway</a></li>
                        <li><a href="config.html">config</a></li>
                        <li><a href="setup.html">setup</a></li>
                        <li><a href="message.html">message</a></li>
                        <li><a href="channels.html">channels</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>高级功能</h2>
                    <ul class="nav-links">
                        <li><a href="agents.html">agents</a></li>
                        <li><a href="cron.html">cron</a></li>
                        <li><a href="browser.html">browser</a></li>
                        <li><a href="skills.html">skills</a></li>
                        <li><a href="models.html">models</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>系统管理</h2>
                    <ul class="nav-links">
                        <li><a href="status.html" class="active">status</a></li>
                        <li><a href="health.html">health</a></li>
                        <li><a href="logs.html">logs</a></li>
                        <li><a href="security.html">security</a></li>
                        <li><a href="update.html">update</a></li>
                    </ul>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1>status 命令</h1>
                <p>显示渠道健康状态和最近会话接收者信息</p>
            </div>

            <div class="content-section">
                <h2>命令概述</h2>
                <p><code>status</code> 命令提供 OpenClaw 系统的实时状态信息，包括消息渠道连接状态、Gateway 服务状态、最近的会话活动等。这是监控和故障排除的重要工具。</p>
                
                <div class="examples">
                    <h3>主要功能</h3>
                    <ul>
                        <li><strong>渠道状态</strong>: 显示所有配置的消息渠道的连接状态</li>
                        <li><strong>会话历史</strong>: 列出最近的对话接收者</li>
                        <li><strong>Gateway 状态</strong>: 显示 WebSocket Gateway 的运行状态</li>
                        <li><strong>资源使用</strong>: 显示内存和 CPU 使用情况</li>
                    </ul>
                </div>
            </div>

            <div class="content-section">
                <h2>基本用法</h2>
                
                <pre><code># 显示完整状态信息
openclaw status

# 只显示渠道状态
openclaw status --channels

# 只显示会话信息
openclaw status --sessions

# 详细模式（包含更多技术细节）
openclaw status --verbose

# JSON 格式输出（适合脚本处理）
openclaw status --json</code></pre>
            </div>

            <div class="content-section">
                <h2>输出详解</h2>
                
                <h3>渠道状态部分</h3>
                <p>显示每个配置渠道的状态：</p>
                <pre><code>Channels:
  ✅ telegram - Connected (Bot: @mybot)
  ✅ whatsapp - Connected (Phone: +1234567890)
  ⚠️  feishu - Rate limited (App: MyApp)
  ❌ discord - Disconnected (Token invalid)</code></pre>

                <h3>会话信息部分</h3>
                <p>显示最近的会话活动：</p>
                <pre><code>Recent Sessions:
  2026-02-18 15:30:22 - Telegram @user123
  2026-02-18 14:45:11 - WhatsApp +1987654321
  2026-02-18 13:22:05 - Feishu chat-abc123</code></pre>

                <h3>Gateway 状态部分</h3>
                <p>显示 Gateway 服务的详细信息：</p>
                <pre><code>Gateway:
  Status: Running
  Port: 18789
  Uptime: 2 days, 4 hours
  Connections: 3 active
  Memory: 256MB / 2GB
  CPU: 12%</code></pre>
            </div>

            <div class="content-section">
                <h2>监控和自动化</h2>
                
                <h3>健康检查脚本</h3>
                <pre><code>#!/bin/bash
# 自动化健康检查
STATUS=$(openclaw status --json)
CHANNELS=$(echo $STATUS | jq '.channels | length')
DISCONNECTED=$(echo $STATUS | jq '[.channels[] | select(.status == "disconnected")] | length')

if [ $DISCONNECTED -gt 0 ]; then
    echo "⚠️ 发现 $DISCONNECTED 个断开的渠道"
    openclaw message send --channel telegram --target @admin \
        --message "OpenClaw 健康检查: $DISCONNECTED 个渠道断开连接"
fi</code></pre>

                <h3>定期状态报告</h3>
                <pre><code># 使用 cron 设置每日状态报告
0 9 * * * openclaw status --json | jq '.summary' | openclaw message send --channel feishu --target chat-daily-report --message -</code></pre>
            </div>

            <div class="content-section">
                <h2>故障排除</h2>
                
                <div class="warning">
                    <h3>常见状态问题</h3>
                    <ul>
                        <li><strong>渠道断开</strong>: 检查 API token 是否过期，网络连接是否正常</li>
                        <li><strong>Gateway 未运行</strong>: 使用 <code>openclaw gateway start</code> 启动服务</li>
                        <li><strong>内存不足</strong>: 监控系统资源，考虑增加内存或优化配置</li>
                        <li><strong>速率限制</strong>: 遵守各平台的速率限制，避免发送过多消息</li>
                    </ul>
                </div>

                <h3>详细诊断</h3>
                <pre><code># 获取详细日志
openclaw status --verbose --debug

# 检查特定渠道
openclaw channels status telegram

# 测试 Gateway 连接
openclaw gateway ping</code></pre>
            </div>

            <div class="footer">
                <p>© 2026 OpenClaw 文档 | <a href="https://docs.openclaw.ai" target="_blank">官方文档</a></p>
            </div>
        </main>
    </div>
</body>
</html>