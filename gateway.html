<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gateway - OpenClaw 文档</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>OpenClaw 文档</h1>
            </div>
            <nav>
                <div class="nav-section">
                    <h2>入门指南</h2>
                    <ul class="nav-links">
                        <li><a href="index.html">什么是 OpenClaw</a></li>
                        <li><a href="getting-started.html">快速开始</a></li>
                        <li><a href="installation.html">安装指南</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>核心命令</h2>
                    <ul class="nav-links">
                        <li><a href="gateway.html" class="active">gateway</a></li>
                        <li><a href="config.html">config</a></li>
                        <li><a href="setup.html">setup</a></li>
                        <li><a href="message.html">message</a></li>
                        <li><a href="channels.html">channels</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>高级功能</h2>
                    <ul class="nav-links">
                        <li><a href="agents.html">agents</a></li>
                        <li><a href="cron.html">cron</a></li>
                        <li><a href="browser.html">browser</a></li>
                        <li><a href="skills.html">skills</a></li>
                        <li><a href="models.html">models</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <h2>系统管理</h2>
                    <ul class="nav-links">
                        <li><a href="status.html">status</a></li>
                        <li><a href="health.html">health</a></li>
                        <li><a href="logs.html">logs</a></li>
                        <li><a href="security.html">security</a></li>
                        <li><a href="update.html">update</a></li>
                    </ul>
                </div>
            </nav>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1>gateway 命令</h1>
                <p>管理和控制 OpenClaw 的 WebSocket Gateway 服务</p>
            </div>

            <div class="content-section">
                <h2>概述</h2>
                <p><code>gateway</code> 命令是 OpenClaw 的核心，用于运行、检查和查询 WebSocket Gateway 服务。Gateway 是 OpenClaw 的中枢神经系统，负责处理所有消息路由、会话管理和代理通信。</p>
                
                <div class="warning">
                    <h3>重要概念</h3>
                    <p>Gateway 是一个长期运行的服务，通常在后台运行。它监听 WebSocket 连接，接收来自各种消息渠道的消息，并将它们路由到相应的 AI 代理进行处理。</p>
                </div>
            </div>

            <div class="content-section">
                <h2>基本用法</h2>
                
                <h3>启动 Gateway</h3>
                <pre><code># 启动 Gateway 服务（默认端口）
openclaw gateway start

# 指定端口启动
openclaw gateway --port 18789

# 强制启动（杀死占用端口的进程）
openclaw gateway --force

# 开发模式启动（隔离状态和配置）
openclaw --dev gateway</code></pre>

                <h3>停止 Gateway</h3>
                <pre><code># 停止 Gateway 服务
openclaw gateway stop</code></pre>

                <h3>重启 Gateway</h3>
                <pre><code># 重启 Gateway 服务
openclaw gateway restart</code></pre>
            </div>

            <div class="content-section">
                <h2>状态查询</h2>
                
                <h3>查看 Gateway 状态</h3>
                <pre><code># 查看 Gateway 运行状态
openclaw gateway status

# 查看详细健康信息
openclaw health</code></pre>

                <h3>查看日志</h3>
                <pre><code># 实时查看 Gateway 日志
openclaw logs

# 查看特定时间段的日志
openclaw logs --since "2 hours ago"</code></pre>
            </div>

            <div class="content-section">
                <h2>高级选项</h2>
                
                <h3>端口配置</h3>
                <pre><code># 自定义端口
openclaw gateway --port 19000

# 开发模式端口（自动使用 19001）
openclaw --dev gateway</code></pre>

                <h3>安全选项</h3>
                <pre><code># 启用 TLS（需要证书）
openclaw gateway --tls --cert ./cert.pem --key ./key.pem

# 限制连接源
openclaw gateway --allowed-origins "https://your-app.com"</code></pre>

                <h3>性能调优</h3>
                <pre><code># 调整内存限制
openclaw gateway --max-old-space-size=4096

# 设置工作线程数
openclaw gateway --workers 4</code></pre>
            </div>

            <div class="content-section">
                <h2>常见问题</h2>
                
                <h3>端口被占用</h3>
                <p>如果遇到端口被占用的错误，可以使用以下解决方案：</p>
                <pre><code># 方案1: 使用 --force 强制启动
openclaw gateway --force

# 方案2: 指定不同的端口
openclaw gateway --port 18790

# 方案3: 手动终止占用进程
lsof -i :18789
kill -9 &lt;PID&gt;</code></pre>

                <h3>Gateway 无法启动</h3>
                <p>如果 Gateway 无法启动，请检查以下内容：</p>
                <ul>
                    <li>Node.js 版本是否兼容（v18+）</li>
                    <li>配置文件是否存在语法错误</li>
                    <li>是否有足够的系统资源（内存、CPU）</li>
                    <li>防火墙是否阻止了端口访问</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>最佳实践</h2>
                <ul>
                    <li><strong>生产环境</strong>: 使用 systemd 或 PM2 等进程管理器来确保 Gateway 持续运行</li>
                    <li><strong>开发环境</strong>: 使用 <code>--dev</code> 标志来隔离开发状态</li>
                    <li><strong>监控</strong>: 定期检查 <code>openclaw status</code> 和日志</li>
                    <li><strong>备份</strong>: 定期备份配置文件和会话数据</li>
                </ul>
            </div>

            <div class="footer">
                <p>© 2026 OpenClaw 文档 | <a href="https://docs.openclaw.ai" target="_blank">官方文档</a></p>
            </div>
        </main>
    </div>
</body>
</html>